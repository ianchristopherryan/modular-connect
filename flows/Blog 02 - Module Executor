{"Version":"2019-10-30","StartAction":"ffdd238b-eb27-407d-9f8f-e254f11749d1","Metadata":{"entryPointPosition":{"x":-1593.6,"y":1323.2},"ActionMetadata":{"ffdd238b-eb27-407d-9f8f-e254f11749d1":{"position":{"x":-1449.6,"y":1292.8}},"8373b2ec-4463-407b-b1f7-2eef6362c95d":{"position":{"x":-1202.4,"y":1283.2},"parameters":{"LambdaFunctionARN":{"displayName":"modular_connect_configuration_loader"}},"dynamicMetadata":{}},"17058db3-cc9e-48f0-8c08-5cf273ef0d1c":{"position":{"x":1326.4,"y":1079.2}},"72682ab3-6a58-4b07-bca5-a8fa8175e447":{"position":{"x":1066.4,"y":1210.4},"parameters":{"QueueId":{"useDynamic":true}},"useDynamic":true},"9c51e895-4d32-4d81-b61d-db5b515f45a9":{"position":{"x":1066.4,"y":1403.2},"parameters":{"ThirdPartyPhoneNumber":{"useDynamic":true}}},"09995da2-8a8f-44ed-a817-1165746125cf":{"position":{"x":287.2,"y":1244},"conditionMetadata":[{"id":"dac5fd7e-d514-493d-a7bf-c3145605c252","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"error"},{"id":"e2b6444c-422e-40bb-af1d-2381a3fe8d01","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"success"}]},"1ff8e79d-d49d-42f3-9c0e-5acc77b9758d":{"position":{"x":505.6,"y":1212.8}},"33e97069-10e9-4e9c-aaf6-014924754467":{"position":{"x":-943.2,"y":1283.2},"parameters":{"Attributes":{"internal_module_list_configuration":{"useDynamic":true}}},"dynamicParams":["internal_module_list_configuration"]},"2ebf5bed-ab50-407e-84b7-1ccca64484d9":{"position":{"x":743.2,"y":1201.6},"conditionMetadata":[{"id":"23d6c002-066a-4323-be07-366d3fafac83","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"transferQueue"},{"id":"2eaea13e-e69f-4869-980d-cfcd772f5572","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"transferWorkingQueue"},{"id":"3d42c4e3-b8fc-47cd-80b4-46e702497344","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"transferNumber"},{"id":"fb7f013f-dd70-4d89-a013-fc64e5cc4a70","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"hangup"}]},"835c5156-fc20-4a2d-baf3-ada744a0280b":{"position":{"x":36,"y":1207.2},"parameters":{"FlowModuleId":{"useDynamic":true}},"useDynamic":true},"40fd79de-a643-4391-aac6-b680f824720d":{"position":{"x":1564.8,"y":1652.8}},"eb754b84-df04-4a97-824c-6115910eb078":{"position":{"x":-674.4,"y":1182.4},"parameters":{"LambdaFunctionARN":{"displayName":"modular_connect_executor"},"LambdaInvocationAttributes":{"internal_module_list_configuration":{"useDynamic":true},"internal_module_executor_last_module_id":{"useDynamic":true}}},"dynamicMetadata":{"internal_module_list_configuration":true,"internal_module_executor_last_module_id":true}},"d0317728-6387-43f0-aef3-a41a9a9e83ed":{"position":{"x":-174.4,"y":1320.8},"parameters":{"Attributes":{"internal_module_executor_settings":{"useDynamic":true},"internal_module_executor_last_module_id":{"useDynamic":true}}},"dynamicParams":["internal_module_executor_settings","internal_module_executor_last_module_id"]},"41346e4f-6828-42ca-8dd9-413979cbf11b":{"position":{"x":-173.6,"y":1180.8}},"76d02dc4-2484-42ef-946a-5e76c3031c66":{"position":{"x":-413.6,"y":1204},"conditionMetadata":[{"id":"3ab3e83e-d3a1-4a55-aa89-dd5cd202a98a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"stop"}]}},"name":"Blog 02 - Module Executor","description":"This flow is part of the Modular Connect Solution from www.ianchristopherryan.com. For license information please view the source on github.","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"ffdd238b-eb27-407d-9f8f-e254f11749d1","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"8373b2ec-4463-407b-b1f7-2eef6362c95d"}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-2:202030678599:function:modular_connect_configuration_loader","InvocationTimeLimitSeconds":"3","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"8373b2ec-4463-407b-b1f7-2eef6362c95d","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"33e97069-10e9-4e9c-aaf6-014924754467","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"17058db3-cc9e-48f0-8c08-5cf273ef0d1c","Type":"TransferContactToQueue","Transitions":{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"QueueAtCapacity"},{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"$.Attributes.exitActionValue"},"Identifier":"72682ab3-6a58-4b07-bca5-a8fa8175e447","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"17058db3-cc9e-48f0-8c08-5cf273ef0d1c","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ThirdPartyPhoneNumber":"$.Attributes.exitActionValue","ThirdPartyConnectionTimeLimitSeconds":"30","ContinueFlowExecution":"True"},"Identifier":"9c51e895-4d32-4d81-b61d-db5b515f45a9","Type":"TransferParticipantToThirdParty","Transitions":{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"CallFailed"},{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"ConnectionTimeLimitExceeded"},{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.module_output_result"},"Identifier":"09995da2-8a8f-44ed-a817-1165746125cf","Type":"Compare","Transitions":{"NextAction":"2ebf5bed-ab50-407e-84b7-1ccca64484d9","Conditions":[{"NextAction":"1ff8e79d-d49d-42f3-9c0e-5acc77b9758d","Condition":{"Operator":"Equals","Operands":["error"]}},{"NextAction":"2ebf5bed-ab50-407e-84b7-1ccca64484d9","Condition":{"Operator":"Equals","Operands":["success"]}}],"Errors":[{"NextAction":"2ebf5bed-ab50-407e-84b7-1ccca64484d9","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{},"Identifier":"1ff8e79d-d49d-42f3-9c0e-5acc77b9758d","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Attributes":{"internal_module_list_configuration":"$.External.configuration"}},"Identifier":"33e97069-10e9-4e9c-aaf6-014924754467","Type":"UpdateContactAttributes","Transitions":{"NextAction":"eb754b84-df04-4a97-824c-6115910eb078","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.exitAction"},"Identifier":"2ebf5bed-ab50-407e-84b7-1ccca64484d9","Type":"Compare","Transitions":{"NextAction":"eb754b84-df04-4a97-824c-6115910eb078","Conditions":[{"NextAction":"17058db3-cc9e-48f0-8c08-5cf273ef0d1c","Condition":{"Operator":"Equals","Operands":["transferQueue"]}},{"NextAction":"72682ab3-6a58-4b07-bca5-a8fa8175e447","Condition":{"Operator":"Equals","Operands":["transferWorkingQueue"]}},{"NextAction":"9c51e895-4d32-4d81-b61d-db5b515f45a9","Condition":{"Operator":"Equals","Operands":["transferNumber"]}},{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","Condition":{"Operator":"Equals","Operands":["hangup"]}}],"Errors":[{"NextAction":"eb754b84-df04-4a97-824c-6115910eb078","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"FlowModuleId":"$.External.internal_module_executor_arn"},"Identifier":"835c5156-fc20-4a2d-baf3-ada744a0280b","Type":"InvokeFlowModule","Transitions":{"NextAction":"09995da2-8a8f-44ed-a817-1165746125cf","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"40fd79de-a643-4391-aac6-b680f824720d","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:ap-southeast-2:202030678599:function:modular_connect_executor","InvocationTimeLimitSeconds":"3","LambdaInvocationAttributes":{"internal_module_list_configuration":"$.Attributes.internal_module_list_configuration","internal_module_executor_last_module_id":"$.Attributes.internal_module_executor_last_module_id"},"ResponseValidation":{"ResponseType":"JSON"}},"Identifier":"eb754b84-df04-4a97-824c-6115910eb078","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"76d02dc4-2484-42ef-946a-5e76c3031c66","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"internal_module_executor_settings":"$.External.internal_module_executor_settings","internal_module_executor_last_module_id":"$.External.internal_module_executor_last_module_id"}},"Identifier":"d0317728-6387-43f0-aef3-a41a9a9e83ed","Type":"UpdateContactAttributes","Transitions":{"NextAction":"835c5156-fc20-4a2d-baf3-ada744a0280b","Errors":[{"NextAction":"40fd79de-a643-4391-aac6-b680f824720d","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"41346e4f-6828-42ca-8dd9-413979cbf11b","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"ComparisonValue":"$.External.internal_module_executor_action"},"Identifier":"76d02dc4-2484-42ef-946a-5e76c3031c66","Type":"Compare","Transitions":{"NextAction":"d0317728-6387-43f0-aef3-a41a9a9e83ed","Conditions":[{"NextAction":"41346e4f-6828-42ca-8dd9-413979cbf11b","Condition":{"Operator":"Equals","Operands":["stop"]}}],"Errors":[{"NextAction":"d0317728-6387-43f0-aef3-a41a9a9e83ed","ErrorType":"NoMatchingCondition"}]}}]}